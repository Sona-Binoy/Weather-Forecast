<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Weather App</title>
</head>
<body>
  <div class="card">
    <div class="search">
      <input type="text" class="search-bar" placeholder="Enter city name">
      <button><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z" clip-rule="evenodd"></path></svg></button>
    </div>

    <div class="weather loading">
      <h1 class="city"></h1>
      <h1 class="temp"></h1>
      <div class="flex">
        <img src="//cdn.weatherapi.com/weather/64x64/day/116.png" alt="" class="icon" style="text-decoration: none;">
        <div class="description"></div>
      </div>
      <div class="humidity"></div>
      <div class="wind"></div>
    </div>
  </div>

  <script>
    let cityEl = document.querySelector(".city");
    let iconEl = document.querySelector(".icon");
    let descriptionEl = document.querySelector(".description");
    let temperatureEl = document.querySelector(".temp");
    let humidityEl = document.querySelector(".humidity");
    let windEl = document.querySelector(".wind");
    let searchBar = document.querySelector(".search-bar");
    let searchEl = document.querySelector(".search button");
    let weatherEl = document.querySelector(".weather");

    let weather = {
      "apikey": "a6f6fef1470f473cb0694459230605",

      fetchWeather: function(city) {
        fetch("http://api.weatherapi.com/v1/current.json?key=a6f6fef1470f473cb0694459230605%20&q=" + city + "&aqi=no")
         .then(response => response.json())
         .then(data => this.displayWeather(data));
      },

      displayWeather: function(data) {
        const { name } = data.location;
        const { icon, text } = data.current.condition;
        const { temp_c, humidity } = data.current;
        const { wind_kph } = data.current;

        cityEl.innerText = `Weather in ${name}`;
        iconEl.src = icon;
        descriptionEl.innerText = text;
        temperatureEl.innerText = `Temperature: ${temp_c}Â°C`;
        humidityEl.innerText = `Humidity: ${humidity}%`;
        windEl.innerText = `Wind Speed: ${wind_kph} km/hr`;
        weatherEl.classList.remove("loading");

        document.body.style.backgroundImage = `url('https://source.unsplash.com/1600x900/?${name}')`;
      },

      search: function() {
        this.fetchWeather(searchBar.value);
      }
    };

    searchEl.addEventListener("click", () => {
      console.log("Clicked!");
      weather.search();
    });

    searchBar.addEventListener("keyup", (event) => {
      if (event.key === "Enter") {
        weather.search();
      }
    });
  </script>
</body>
</html>